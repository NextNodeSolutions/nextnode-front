name: Deploy to Development

concurrency:
    group: deploy-development
    cancel-in-progress: true

on:
    push:
        branches: [main]
    workflow_dispatch:

jobs:
    quality-checks:
        name: Quality Checks
        uses: NextNodeSolutions/github-actions/.github/workflows/quality-checks.yml@main
        with:
            run-lint: true
            run-typecheck: true
            run-tests: true
            run-build: true
            run-security: true
            test-coverage: true
        secrets: inherit

    deploy:
        name: Deploy to Development
        needs: quality-checks
        uses: NextNodeSolutions/github-actions/.github/workflows/dokploy-deploy.yml@main
        with:
            environment: development
            notify-slack: true
        secrets: inherit
