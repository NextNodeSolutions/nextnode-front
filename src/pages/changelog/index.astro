---
/**
 * Changelog Listing Page
 *
 * Displays all changelog entries sorted by date (newest first).
 * Uses ChangelogCard component for consistent presentation.
 */

// Layouts
import BaseLayout from '@/layouts/BaseLayout.astro'

// Foundation components
import Text from '@/components/fundations/elements/Text.astro'
import Wrapper from '@/components/fundations/containers/Wrapper.astro'

// Components
import ChangelogCard from '@/components/changelog/ChangelogCard.astro'

// Content
import { getCollection } from 'astro:content'

const allChangelogs = await getCollection('changelog')
const sortedChangelogs = allChangelogs.sort(
	(a, b) => new Date(b.data.date).getTime() - new Date(a.data.date).getTime(),
)
---

<BaseLayout
	title="Changelog"
	description="Stay up to date with the latest features, improvements, and fixes in NextNode."
>
	<section>
		<Wrapper
			variant="standard"
			class="relative grid grid-cols-1 gap-y-12 py-42 md:grid-cols-4 lg:gap-y-24"
		>
			<div class="md:col-span-2 md:col-start-2 md:text-center">
				<Text tag="span" variant="textSM" class="text-white"
					>Changelog</Text
				>
				<Text
					tag="h1"
					variant="displayXL"
					class="font-display mt-12 text-balance text-white"
				>
					Follow our journey
					<span class="text-base-400 block"
						>and keep track of us.</span
					>
				</Text>
			</div>
			<div
				class="flex flex-col gap-y-12 md:col-span-2 md:col-start-2 md:row-start-2 lg:gap-y-24"
			>
				{sortedChangelogs.map(post => <ChangelogCard post={post} />)}
			</div>
		</Wrapper>
	</section>
</BaseLayout>
