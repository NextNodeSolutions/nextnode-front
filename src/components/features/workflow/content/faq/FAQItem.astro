---
import type { FAQQuestion } from './types'

interface Props {
	faq: FAQQuestion
}

const { faq } = Astro.props
---

<div
	class="faq-item overflow-hidden rounded-xl border border-gray-200 bg-white shadow-sm transition-all duration-300 hover:shadow-md dark:border-gray-700 dark:bg-gray-800"
	data-category={faq.category}
>
	<!-- Question (header cliquable) -->
	<button
		class="faq-header flex w-full items-center justify-between px-6 py-5 text-left transition-colors duration-200 hover:bg-gray-50 focus:ring-2 focus:ring-blue-500 focus:outline-none focus:ring-inset dark:hover:bg-gray-700/50"
		data-faq={faq.id}
		aria-expanded="false"
	>
		<div class="flex items-start gap-4">
			<!-- Category icon -->
			<div
				class="flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-lg bg-gradient-to-br from-blue-100 to-purple-100 text-lg dark:from-blue-900/30 dark:to-purple-900/30"
			>
				{faq.icon}
			</div>

			<div class="flex-1">
				<!-- Category badge -->
				<div
					class="mb-2 inline-flex items-center rounded-full bg-blue-100 px-2 py-1 text-xs font-medium text-blue-800 dark:bg-blue-900/30 dark:text-blue-300"
				>
					{faq.category}
				</div>

				<!-- Question -->
				<h3
					class="text-lg leading-tight font-semibold text-gray-900 dark:text-white"
				>
					{faq.question}
				</h3>
			</div>
		</div>

		<!-- Expansion icon -->
		<div class="ml-4 flex-shrink-0">
			<svg
				class="faq-chevron h-5 w-5 transform text-gray-500 transition-transform duration-200 dark:text-gray-400"
				fill="none"
				stroke="currentColor"
				viewBox="0 0 24 24"
			>
				<path
					stroke-linecap="round"
					stroke-linejoin="round"
					stroke-width="2"
					d="M19 9l-7 7-7-7"></path>
			</svg>
		</div>
	</button>

	<!-- Answer (collapsible content) -->
	<div
		class="faq-content max-h-0 overflow-hidden transition-all duration-500 ease-out"
		data-content={faq.id}
	>
		<div class="border-t border-gray-100 px-6 py-5 dark:border-gray-700">
			<div
				class="ml-14 text-gray-600 dark:text-gray-300"
				set:html={faq.answer}
			/>
		</div>
	</div>
</div>
