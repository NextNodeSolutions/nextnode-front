---
import { STEP_COLORS } from '../workflow-constants'

interface Props {
	color: string
	index: number
}

const { color, index } = Astro.props
const nextColor = STEP_COLORS[(index + 1) % STEP_COLORS.length]
---

{/* Timeline node - fixed positions like before */}
<div
	class="absolute top-8 -left-12 z-10 flex h-4 w-4 items-center justify-center"
	style={`animation-delay: ${index * 200}ms`}
>
	<div
		class="timeline-node h-4 w-4 rounded-full border-4 border-white bg-gradient-to-r shadow-lg dark:border-gray-900"
		style={`background: linear-gradient(135deg, ${color}, ${nextColor})`}
	>
	</div>
</div>

{/* Progress pulse effect */}
<div
	class="absolute top-6 -left-14 z-0 h-8 w-8 animate-ping rounded-full opacity-20"
	style={`background: ${color}; animation-delay: ${index * 200 + 100}ms`}
>
</div>

<style>
	.timeline-node {
		opacity: 0;
		animation: scale-in 0.6s ease-out forwards;
		transform: scale(0);
	}

	/* Dark mode adjustments */
	@media (prefers-color-scheme: dark) {
		.timeline-node {
			border-color: #111827;
		}
	}

	/* Accessibility */
	@media (prefers-reduced-motion: reduce) {
		.timeline-node {
			animation: none;
			opacity: 1;
			transform: none;
		}
	}
</style>
