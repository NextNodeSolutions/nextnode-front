---
import { STEP_COLORS } from '../workflow-constants'

// Générer un ID unique pour éviter les conflits entre instances
const uniqueId = `gradient-${Math.random().toString(36).substring(2, 11)}`

const fullPathD =
	'M 40 56 L 80 60 L 350 75 C 480 85 520 100 510 140 C 500 180 420 195 320 185 C 240 175 200 180 205 220 C 210 260 250 275 320 265 L 420 255 C 560 245 600 260 590 300 C 580 340 620 355 700 365 L 880 385 L 950 389'
---

<defs>
	<!-- Gradient horizontal avec ID unique -->
	<linearGradient
		id={uniqueId}
		gradientUnits="userSpaceOnUse"
		x1="40"
		y1="0"
		x2="950"
		y2="0"
	>
		<stop offset="0%" stop-color={STEP_COLORS[0]} stop-opacity="0.8"></stop>
		<stop offset="20%" stop-color={STEP_COLORS[1]} stop-opacity="0.8"
		></stop>
		<stop offset="40%" stop-color={STEP_COLORS[2]} stop-opacity="0.8"
		></stop>
		<stop offset="60%" stop-color={STEP_COLORS[3]} stop-opacity="0.8"
		></stop>
		<stop offset="80%" stop-color={STEP_COLORS[4]} stop-opacity="0.8"
		></stop>
		<stop offset="100%" stop-color={STEP_COLORS[5]} stop-opacity="0.8"
		></stop>
	</linearGradient>
</defs>

<!-- Background path (gris clair) -->
<path d={fullPathD} stroke="#f1f5f9" stroke-width="8" fill="none" opacity="0.3"
></path>

<!-- Main path with gradient -->
<path
	d={fullPathD}
	stroke={`url(#${uniqueId})`}
	stroke-width="4"
	fill="none"
	stroke-dasharray="12,6"
	opacity="0.9"
>
	<animate
		attributeName="stroke-dashoffset"
		values="18;0"
		dur="2s"
		repeatCount="indefinite"></animate>
</path>
