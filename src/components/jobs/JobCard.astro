---
/**
 * JobCard.astro - Displays job listings in card format
 *
 * Shows job title, department, location, type badge, description,
 * and links to full job posting. Uses foundation components and NextNode color tokens.
 */

import type { CollectionEntry } from 'astro:content'
import Button from '@/components/fundations/elements/Button.astro'
import Text from '@/components/fundations/elements/Text.astro'

interface Props {
	/** Job entry from the jobs collection */
	post: CollectionEntry<'jobs'>
}

const { post } = Astro.props

const url = `/jobs/${post.slug}`
const { title, department, location, type, description } = post.data

/** Badge colors based on job type using NextNode tokens */
const typeBadgeColors: Record<typeof type, string> = {
	'full-time': 'bg-nextnode-500 text-white',
	'part-time': 'bg-accent-500 text-white',
	contract: 'bg-base-600 text-white',
	internship: 'bg-accent-600 text-white',
}

/** Display labels for job types */
const typeLabels: Record<typeof type, string> = {
	'full-time': 'Full-time',
	'part-time': 'Part-time',
	contract: 'Contract',
	internship: 'Internship',
}

const badgeColor = typeBadgeColors[type]
const typeLabel = typeLabels[type]
---

<article class="group">
	<div
		class="before:bg-nextnode-500 after:bg-base-700 relative px-4 before:absolute before:top-0 before:left-0 before:h-6 before:w-px after:absolute after:top-8 after:bottom-0 after:left-0 after:w-px"
	>
		<div class="flex items-center gap-3">
			<Text tag="span" variant="textXS" class="text-base-400">
				{department}
			</Text>
			<span class="text-base-600">â€¢</span>
			<Text tag="span" variant="textXS" class="text-base-400">
				{location}
			</Text>
		</div>
	</div>

	<div class="mt-4 flex items-center gap-3">
		<span
			class:list={[
				'rounded-full px-2 py-0.5 text-xs font-medium',
				badgeColor,
			]}
		>
			{typeLabel}
		</span>
	</div>

	<Text tag="h3" variant="textLG" class="mt-3 font-semibold text-white">
		{title}
	</Text>

	<Text tag="p" variant="textSM" class="text-base-400 mt-2 line-clamp-3">
		{description}
	</Text>

	<div class="mt-6 flex">
		<Button
			isLink
			size="sm"
			variant="default"
			href={url}
			title={`View ${title} position`}
			aria-label={`View full job posting for ${title}`}
		>
			View position
		</Button>
	</div>
</article>
