---
/**
 * CustomerCard.astro - Displays customer case studies in grids/lists
 *
 * Shows customer logo, name, industry, and optional quote/summary.
 * Links to full case study page.
 * Uses foundation components and NextNode color tokens.
 */

import { Image } from 'astro:assets'
import type { CollectionEntry } from 'astro:content'
import Text from '@/components/fundations/elements/Text.astro'

interface Props {
	/** Customer entry from the customers collection */
	post: CollectionEntry<'customers'>
}

const { post } = Astro.props

const url = `/customers/${post.slug}`
const { name, logo, industry, quote, quoteAttribution } = post.data
---

<a
	href={url}
	title={`View ${name} case study`}
	class="group hover:border-nextnode-200 hover:bg-nextnode-50/50 flex flex-col rounded-lg border border-slate-200 bg-white p-6 transition-all duration-500 ease-in-out lg:p-8"
>
	{
		logo && (
			<div class="mb-6 flex h-16 items-center justify-center">
				<Image
					width={200}
					height={64}
					src={logo.url}
					alt={logo.alt}
					class="max-h-16 w-auto object-contain"
				/>
			</div>
		)
	}

	<Text tag="h3" variant="textLG" class="font-semibold text-slate-900">
		{name}
	</Text>

	<Text tag="span" variant="textSM" class="text-nextnode-600 mt-1">
		{industry}
	</Text>

	{
		quote && (
			<blockquote class="border-nextnode-500 mt-4 border-l-2 pl-4">
				<Text
					tag="p"
					variant="textSM"
					class="line-clamp-3 text-slate-600 italic"
				>
					"{quote}"
				</Text>
				{quoteAttribution && (
					<cite class="mt-2 block not-italic">
						<Text
							tag="span"
							variant="textXS"
							class="text-slate-500"
						>
							— {quoteAttribution}
						</Text>
					</cite>
				)}
			</blockquote>
		)
	}

	<div class="mt-auto pt-4">
		<Text
			tag="span"
			variant="textSM"
			class="text-nextnode-600 group-hover:text-nextnode-700 transition-colors"
		>
			View case study →
		</Text>
	</div>
</a>
