---
import { cn } from '@/lib/utils'
import Navigation from './header/navigation.astro'
import Controls from './header/controls.astro'
import Logo from './header/logo.astro'
import MobileButton from './header/mobile-button.astro'
import MobileMenu from './header/mobile-menu.astro'
import { navigationLinks } from '@/lib/constants'
---

<header
	class="fixed top-0 right-0 left-0 z-50 bg-transparent transition-all duration-300"
	id="header"
>
	<div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
		<div
			class="flex h-12 items-center justify-between transition-all duration-300"
		>
			<Logo />

			<div class="hidden items-center space-x-6 md:flex">
				<Controls />
				<Navigation links={navigationLinks} />
			</div>

			<MobileButton action="open" />
		</div>
	</div>

	<!-- Mobile Menu -->
	<MobileMenu links={navigationLinks} />
</header>

<script>
	// Header scroll effect
	const header = document.getElementById('header')

	function updateHeader() {
		if (!header) return

		const currentScrollY = window.scrollY

		if (currentScrollY > 50) {
			// Scrolled down - make header solid
			header.classList.remove('bg-transparent')
			header.classList.add(
				'bg-white/95',
				'backdrop-blur-sm',
				'border-b',
				'border-gray-100',
			)
		} else {
			// At top - make header transparent
			header.classList.add('bg-transparent')
			header.classList.remove(
				'bg-white/95',
				'backdrop-blur-sm',
				'border-b',
				'border-gray-100',
			)
		}
	}

	// Listen for scroll events
	window.addEventListener('scroll', updateHeader, { passive: true })

	// Initial call
	updateHeader()
</script>
